(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{6117:function(e,s,t){Promise.resolve().then(t.bind(t,4597)),Promise.resolve().then(t.t.bind(t,2972,23))},4597:function(e,s,t){"use strict";t.d(s,{default:function(){return o}});var r=t(7437),l=t(2265),n=t(875),a=t(2135),c=t(1533);function i(e){let{title:s,category:t,votes:i,description:o,tags:d}=e,[x,u]=(0,l.useState)(i),[p,m]=(0,l.useState)(null);return(0,r.jsxs)("div",{className:"flex items-start gap-3 bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>{"up"===p?(u(x-1),m(null)):(u("down"===p?x+2:x+1),m("up"))},className:"p-1 rounded-md ".concat("up"===p?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-blue-500"),children:(0,r.jsx)(a.Z,{size:24})}),(0,r.jsx)("span",{className:"font-bold text-lg",children:x}),(0,r.jsx)("button",{onClick:()=>{"down"===p?(u(x+1),m(null)):(u("up"===p?x-2:x-1),m("down"))},className:"p-1 rounded-md ".concat("down"===p?"bg-red-100 text-red-600":"text-gray-400 hover:text-red-500"),children:(0,r.jsx)(n.Z,{size:24})})]}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-medium text-gray-800",children:s}),o&&(0,r.jsx)("p",{className:"text-gray-500 mt-1",children:o}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,r.jsx)("span",{className:"inline-block bg-blue-100 text-blue-800 px-2 py-0.5 rounded-md text-sm",children:t}),d&&d.map(e=>(0,r.jsxs)("span",{className:"inline-block bg-gray-100 text-gray-800 px-2 py-0.5 rounded-md text-xs",children:["#",e]},e))]})]}),(0,r.jsx)("button",{className:"text-gray-500",children:(0,r.jsx)(c.Z,{size:20})})]})})]})}function o(){let[e,s]=(0,l.useState)([]),[t,a]=(0,l.useState)(!0),[c,o]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{try{a(!0);let e=await fetch("https://poodle-relevant-alien.ngrok-free.app/api/proposals");if(!e.ok)throw Error("Failed to fetch proposals");let t=await e.json();s(t)}catch(e){o(e instanceof Error?e.message:"An error occurred"),console.error("Error fetching proposals:",e)}finally{a(!1)}})()},[]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("button",{className:"flex items-center mb-4 text-gray-500",children:[(0,r.jsx)(n.Z,{size:20}),(0,r.jsx)("h2",{className:"text-xl ml-1",children:"Recent Proposals"})]}),t&&(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),c&&(0,r.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:[(0,r.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,r.jsx)("span",{className:"block sm:inline",children:c})]}),!t&&!c&&(0,r.jsx)("div",{className:"space-y-4",children:e.length>0?e.map(e=>(0,r.jsx)(i,{title:e.title,category:e.category,votes:e.votes,description:e.description,tags:e.tags},e.id)):(0,r.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No proposals found."})})]})}}},function(e){e.O(0,[1,971,117,744],function(){return e(e.s=6117)}),_N_E=e.O()}]);